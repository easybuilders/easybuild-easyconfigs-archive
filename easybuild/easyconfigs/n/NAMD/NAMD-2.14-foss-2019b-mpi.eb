name = 'NAMD'
version = '2.14'
versionsuffix = '-mpi'

homepage = 'https://www.ks.uiuc.edu/Research/namd/'
description = """NAMD is a parallel molecular dynamics code designed for high-performance simulation of
 large biomolecular systems."""

toolchain = {'name': 'foss', 'version': '2019b'}
toolchainopts = {'usempi': True, 'openmp': False, 'pic': True}

sources = ['%(name)s_%(version)s_Source.tar.gz']
patches = [
    "charm_6.10.2.patch",  # fix from latest charm github
    "%(name)s-%(version)s_Linux-POWER-cuda.patch",  # support for GCC 8+ on POWER
]

dependencies = [
    ('Tcl', '8.6.9'),
    ('FFTW', '3.3.8'),
]
checksums = [
    '34044d85d9b4ae61650ccdba5cda4794088c3a9075932392dd0752ef8c049235',  # NAMD_2.14_Source.tar.gz
    '6644b13560829e22ac5e5ceedde73b52928ef312a1f3f3775020f258e8150a4e',  # charm_6.10.2.patch
    '0705e8454bec1fcfd20f65e12d9b9ebc70080fcd2efba9053e3931254d799a28',  # NAMD-2.14_Linux-POWER-cuda.patch
]

# /bin/csh is required by 'config' script
osdependencies = ['tcsh']

# Hard to make charm build with gcc on POWER, so we don't currently try.
charm_arch = "mpi-linux-x64_64"

moduleclass = 'chem'
