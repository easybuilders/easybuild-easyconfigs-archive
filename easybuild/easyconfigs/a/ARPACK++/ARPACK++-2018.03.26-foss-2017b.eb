easyblock = 'CMakeMake'

name = 'ARPACK++'
version = '2018.03.26'
commit_id = 'e7facee'

homepage = 'https://github.com/m-reuter/arpackpp'
description = """Arpackpp is a C++ interface to the ARPACK Fortran package,
 which implements the implicit restarted Arnoldi method for
 iteratively solving large-scale sparse eigenvalue problems."""

toolchain = {'name': 'foss', 'version': '2017b'}

source_urls = ['https://github.com/m-reuter/arpackpp/archive']
sources = ['%s.tar.gz' % commit_id]
patches = ['%(name)s-%(version)s_find-deps.patch']

builddependencies = [('CMake', '3.10.1')]

dependencies = [
    ('arpack-ng', '3.5.0'),
    ('SuperLU', '5.2.1'),
    ('SuiteSparse', '4.5.6', '-METIS-5.1.0'),
]

configopts = "-DSUPERLU=ON -DCHOLMOD=ON -DUMFPACK=ON"

separate_build_dir = True

sanity_check_paths = {
    'files': [],
    'dirs': ['include/arpackpp']
}

moduleclass = 'numlib'
