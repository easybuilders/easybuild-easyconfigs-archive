##
# This file is an EasyBuild reciPY as per https://github.com/easybuilders/easybuild
# Authors::   Stephane Thiell <sthiell@stanford.edu>
##
name = 'VMD'
version = '1.9.4a43'
versionsuffix = '-Python-%(pyver)s'

homepage = 'https://www.ks.uiuc.edu/Research/vmd'
description = """VMD is a molecular visualization program for displaying, animating, and analyzing large biomolecular
 systems using 3-D graphics and built-in scripting."""

toolchain = {'name': 'fosscuda', 'version': '2019b'}

source_urls = [
    'https://www.ks.uiuc.edu/Research/vmd/vmd-1.9.4/files/alpha/',
    'https://www.ks.uiuc.edu/Research/vmd/vmd-%(version)s/files/final',
    'http://webclu.bio.wzw.tum.de/stride/'
]
sources = [
    'vmd-%(version)s.src.tar.gz',
    {'filename': 'stride.tar.gz', 'extract_cmd': "tar -C vmd-%(version)s/lib/stride -xf %s"},
]
patches = [
    ('VMD-1.9.3_plugins.patch'),
    ('VMD-1.9.3_surf_Makefile.patch', 'vmd-%(version)s'),
    ('VMD-1.9.3_surf_bad_printfs.patch', 'vmd-%(version)s'),
    ('VMD-1.9.3_stride_Makefile.patch', 'vmd-%(version)s'),
    ('VMD-1.9.3_stride_MAX_AT_IN_RES.patch', 'vmd-%(version)s'),
    ('VMD-1.9.4_configure.patch', 'vmd-%(version)s'),
    ('VMD-1.9.4_extra_colors.patch', 'vmd-%(version)s'),
]
checksums = [
    '84323b2c34db8ce5739372dd6e225ef1fa1dc5c4b82d3810d55923a653b1bdc0',  # vmd-1.9.4a43.src.tar.gz
    '51a8bc2988bb184bd08216124f61725225bb1a6f563bdf8cd35154cb5d621c1a',  # stride.tar.gz
    '7779c6ceedb6e58312a09228f142580a5a60bffec917fd8e34f51144ed020e0f',  # VMD-1.9.4_configure.patch
    '0f45573d4b01133dc88b3238e2286db1d6a54c7cb6a4fc411fb3600aed617149',  # VMD-1.9.4_plugins.patch
    '4950f30e99ca874435d8394bfe2dea71e242acbb3ab739ada3fe9c60022ad5c9',  # VMD-1.9.4_surf_Makefile.patch
    '20a5604767d26061123f55a16251d94b09e0bb6994959d3ee804c79cc477266e',  # VMD-1.9.4_surf_bad_printfs.patch
    'e2db0feba44d6f30c27a47bbdc93f6c329cee7b3e7f59d5bc42ddebd9c6353e8',  # VMD-1.9.4_stride_Makefile.patch
    '10c93dfb7ab56ace25646d7d1f955796f0fec2d779e8c425f31ac5e59f168ff8',  # VMD-1.9.4_stride_MAX_AT_IN_RES.patch
    '8ef7a0f1067ef6b660122ce7a3d1e2d0954d6c10660d936c77d9a32bb7fd98c3',  # VMD-1.9.4_extra_colors.patch
]

dependencies = [
    ('Tcl', '8.6.9'),
    ('Tk', '8.6.9'),
    ('FLTK', '1.3.5'),
    ('Python', '3.7.4'),
    ('SciPy-bundle', '2019.10', '-Python-%(pyver)s'),
    ('Tkinter', '3.7.4'),
    ('Mesa', '19.1.7'),
    ('netCDF', '4.7.1'),
    ('FFmpeg', '4.2.1'),
    ('ImageMagick', '7.0.9-5'),
    ('ACTC', '1.1'),
    ('OptiX', '6.5.0', '', True),
    ('zlib', '1.2.11'),
    ('libpng', '1.6.37'),
]

moduleclass = 'vis'
