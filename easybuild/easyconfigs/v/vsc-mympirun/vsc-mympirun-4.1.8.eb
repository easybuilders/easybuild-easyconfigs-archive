easyblock = 'PythonBundle'

name = 'vsc-mympirun'
version = '4.1.8'

homepage = 'https://github.com/hpcugent/vsc-mympirun'
description = """VSC-tools is a set of Python libraries and scripts that are commonly used within HPC-UGent."""

# we build this to work with every python version
toolchain = {'name': 'dummy', 'version': ''}

osdependencies = ['python-setuptools']

allow_system_deps = [('Python', SYS_PYTHON_VERSION)]

download_dep_fail = True
use_pip = False

exts_list = [
    ('IPy', '1.00', {
        'modulename': 'IPy',
        'source_urls': ['https://pypi.python.org/packages/source/i/IPy'],
    }),
    ('vsc-install', '0.12.7', {
        'modulename': 'vsc.install',
        'source_urls': ['https://pypi.python.org/packages/source/v/vsc-install'],
    }),
    ('vsc-base', '2.9.2', {
        'modulename': 'vsc.utils',
        'source_urls': ['https://pypi.python.org/packages/source/v/vsc-base'],
    }),
    (name, version, {
        # don't check for import of vsc.mympirun, since that may fail if vsc-base is picked up from the OS
        'modulename': 'vsc',
        'source_urls': ['https://pypi.python.org/packages/source/v/vsc-mympirun'],
    }),
]

# we ship something in bin/fake
modextrapaths = {'PATH': 'bin/fake'}

sanity_check_paths = {
    'files': ['bin/mympirun', 'bin/mympisanity'],
    'dirs': ['bin/fake'],
}
sanity_check_commands = ["mympirun --help"]

moduleclass = 'tools'
