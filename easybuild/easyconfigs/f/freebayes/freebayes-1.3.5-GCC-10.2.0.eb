easyblock = 'MesonNinja'

name = 'freebayes'
version = '1.3.5'

homepage = 'https://github.com/freebayes/freebayes'
description = "Bayesian haplotype-based genetic polymorphism discovery and genotyping."

toolchain = {'name': 'GCC', 'version': '10.2.0'}

sources = [{
    'filename': SOURCE_TAR_GZ,
    'git_config': {
        'url': 'https://github.com/freebayes',
        'repo_name': 'freebayes',
        'tag': 'v1.3.5',
        'recursive': True,
    },
}]

builddependencies = [
    ('binutils', '2.35'),
    ('Meson', '0.55.3'),
    ('Ninja', '1.10.1'),
]

dependencies = [
    ('parallel', '20210322'),
    ('VCFtools', '0.1.16'),
]

configopts = "--buildtype debug"

postinstallcmds = ['cp %(builddir)s/freebayes/scripts/* %(installdir)s/']

modextrapaths = {'PATH': ['']}

sanity_check_paths = {
    'files': ['bin/freebayes', 'bin/bamleftalign', 'freebayes-parallel'],
    'dirs': [],
}

moduleclass = 'bio'
