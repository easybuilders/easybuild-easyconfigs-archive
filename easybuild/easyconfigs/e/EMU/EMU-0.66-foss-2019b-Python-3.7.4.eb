easyblock = 'PythonPackage'

name = 'EMU'
version = '0.66'
versionsuffix = '-Python-%(pyver)s'

homepage = 'http://www.popgen.dk/software/index.php/EMU'

description = """EMU infers population structure in the presence of missingness and works for both haploid, 
psuedo-haploid and diploid genotype datasets
"""

toolchain = {'name': 'foss', 'version': '2019b'}

source_urls = ['https://github.com']
sources = ['Rosemeis/emu/archive/a6148ec9edefee19df0fcb6dc0a8272b9e5c96bc.zip']
checksums = ['6e5166719fde2ec2a66bb25bc6ce6fc19f30b987081ebf1606e5f4ce4bdffe31']

dependencies = [
    ('Python', '3.7.4'),
    ('SciPy-bundle', '2019.10', versionsuffix),
    ('scikit-learn', '0.21.3', versionsuffix),
]

postinstallcmds = ['cp -a emu* convertMat.py %(installdir)s']

download_dep_fail = True
use_pip = True

options = {'modulename': False}

sanity_check_paths = {
    'files': ['lib/python3.7/site-packages/halko.cpython-37m-x86_64-linux-gnu.so',
              'lib/python3.7/site-packages/reader.cpython-37m-x86_64-linux-gnu.so',
              'lib/python3.7/site-packages/shared.cpython-37m-x86_64-linux-gnu.so'],
    'dirs': ['']
}

moduleclass = 'bio'
