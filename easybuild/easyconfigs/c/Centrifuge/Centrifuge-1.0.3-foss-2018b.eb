# This file is an EasyBuild reciPY as per https://easybuilders.github.io/easybuild/
# Author: Pablo Escobar Lopez
# sciCORE - University of Basel
# SIB Swiss Institute of Bioinformatics

easyblock = 'ConfigureMake'

name = 'Centrifuge'
version = '1.0.3'

homepage = 'https://ccb.jhu.edu/software/centrifuge/'
description = 'Classifier for metagenomic sequences'

toolchain = {'name': 'foss', 'version': '2018b'}

source_urls = ['https://github.com/DaehwanKimLab/centrifuge/archive/']
sources = ['v%(version)s.tar.gz']
patches = ['centrifuge_1.0.3_compile_error_gcc72.patch']
checksums = [
    '71340f5c0c20dd4f7c4d98ea87f9edcbb1443fff8434e816a5465cbebaca9343',  # v1.0.3.tar.gz
    'af83fb8e1c730b1afb56425e80cb50222867f9af71ee14df28c62f38ea0fc9c3',  # centrifuge_1.0.3_compile_error_gcc72.patch
]

skipsteps = ['configure']

buildopts = 'CC="$CC" CPP="$CXX"'

installopts = ' prefix=%(installdir)s'

sanity_check_paths = {
    'files': ['bin/centrifuge-class', 'bin/centrifuge-build-bin', 'bin/centrifuge-inspect-bin'],
    'dirs': [],
}

moduleclass = 'bio'
