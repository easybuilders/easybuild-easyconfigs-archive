easyblock = 'Bundle'

name = 'XMDS2'
version = '2.2.3'
versionsuffix = '-Python-%(pyver)s'

homepage = 'http://www.xmds.org/'
description = """ The purpose of XMDS2 is to simplify the process of creating simulations that
 solve systems of initial-value first-order partial and ordinary differential equations."""

toolchain = {'name': 'foss', 'version': '2018b'}


dependencies = [
    ('Python', '2.7.15'),
    ('GSL', '2.5'),
    ('libxml2', '2.9.8'),
    ('libxslt', '1.1.32'),
    ('lxml', '4.2.5', versionsuffix),
    ('mpmath', '1.0.0', versionsuffix),
    ('h5py', '2.8.0', versionsuffix),
]

exts_defaultclass = 'PythonPackage'
exts_default_options = {
    'download_dep_fail': True,
    'use_pip': True,
}

exts_list = [
    ('Cheetah', '2.4.4', {
        'modulename': 'Cheetah',
        'source_urls': ['https://pypi.python.org/packages/source/c/Cheetah/'],
        'checksums': ['be308229f0c1e5e5af4f27d7ee06d90bb19e6af3059794e5fd536a6f29a9b550'],
    }),
    ('pyparsing', '2.3.0', {
        'source_urls': ['https://pypi.python.org/packages/source/p/pyparsing/'],
        'checksums': ['f353aab21fd474459d97b709e527b5571314ee5f067441dc9f88e33eecd96592'],
    }),
    ('xmds', version, {
        'modulename': 'xpdeint',
        'patches': ['XMDS2-2.2.3_HDF5.patch'],
        'source_urls': ['http://download.sourceforge.net/projects/xmds'],
        'checksums': [
            '4363afe894c4eb322d6445ba53f3f124c9cde67937518d0b402f72fc82352924',  # xmds-2.2.3.tar.gz
            '27f1838f9c2c4ecaecaaca081ad67f0c8471a635bb23ccb0a2bb91db73154ee5',  # XMDS2-2.2.3_HDF5.patch
        ],
    }),
]

sanity_check_paths = {
    'files': ['bin/xmds2'],
    'dirs': ['lib/python%(pyshortver)s/site-packages'],
}

modextrapaths = {'PYTHONPATH': ['lib/python%(pyshortver)s/site-packages']}

moduleclass = 'math'
