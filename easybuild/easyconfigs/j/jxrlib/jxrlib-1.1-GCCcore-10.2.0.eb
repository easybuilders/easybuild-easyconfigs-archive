##
# This file is an EasyBuild reciPY as per https://github.com/easybuilders/easybuild
# Author::   Denis Kristak (INUITS)
##

easyblock = 'CMakeMake'

name = 'jxrlib'
version = '1.1'

homepage = 'https://deb.debian.org/debian/pool/main/j/jxrlib/'
description = """Open source implementation of jpegxr"""

toolchain = {'name': 'foss', 'version': '2020b'}

source_urls = ['https://deb.debian.org/debian/pool/main/j/jxrlib/']
sources = ['%(name)s_%(version)s.orig.tar.gz']
patches = [
    ('%(name)s-%(version)s-foss-2020b_support_cmake.patch', 1),
]
checksums = [
    'c7287b86780befa0914f2eeb8be2ac83e672ebd4bd16dc5574a36a59d9708303',  # jxrlib_1.1.orig.tar.gz
    'f1c37976b4acdf393b583afe4126d888b3f79bc519c48d2ba9f93a24821077b5',  # jxrlib-1.1-foss-2020b_support_cmake.patch
]

builddependencies = [
    ('CMake', '3.18.4'),
]

modextrapaths = {'CPATH': 'include/jxrlib'}

sanity_check_paths = {
    'files': ['bin/JxrDecApp', 'bin/JxrEncApp', "lib/libjpegxr.%s" % SHLIB_EXT],
    'dirs': [],
}

sanity_check_commands = ['JxrDecApp', 'JxrEncApp']

moduleclass = 'lib'
